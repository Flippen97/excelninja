"use strict";var scrollLinks=document.getElementsByClassName("scroll");function toggleNav(){var t=document.getElementById("slide-nav-btn"),e=document.getElementById("slide-nav");t.addEventListener("click",function(){t.classList.toggle("slide-nav-btn-active"),e.classList.toggle("slide-nav-active")})}function hreflinks(){button.addEventListener}function changeHash(t){var e="section"+t;document.getElementById("section"+t).scrollIntoView({behavior:"smooth"}),setTimeout(function(){window.location.hash=e},500)}function getCurrentUrl(){var t=window.location.href.split("index.html#section")[1];return void 0===t&&(t=1),t}function eventlistener(){window.addEventListener("keydown",function(t){if(!t.defaultPrevented){var e=getCurrentUrl();switch(t.key){case"Down":case"ArrowDown":changeHash(+e+1);break;case"Up":case"ArrowUp":if("1"===e)return;changeHash(+e-1);break;default:return}t.preventDefault()}},!0)}function changeHashScroll(t){var e=getCurrentUrl();if(console.log(e),"down"===t){var n=+e+1;setTimeout(function(){window.location.hash="section"+n},1500)}else{if("1"===e)return;n=+e-1;setTimeout(function(){window.location.hash="section"+n},1500)}}function mobileVhFix(){var t=Math.max(document.documentElement.clientHeight,window.innerHeight||0);document.getElementById("section1").style["min-height"]=t+"px",document.querySelector(".slide-nav").style["min-height"]=t+"px";var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);window.addEventListener("resize",function(n){var i=Math.max(document.documentElement.clientWidth,window.innerWidth||0);e!=i&&setTimeout(function(){t=Math.max(document.documentElement.clientHeight,window.innerHeight||0),document.getElementById("section1").style["min-height"]=t+"px",document.querySelector(".slide-nav").style["min-height"]=t+"px",e=Math.max(document.documentElement.clientWidth,window.innerWidth||0)},500)})}toggleNav(),eventlistener(),mobileVhFix(),function(){function t(){var t,e,n=this;this.adminBody=document.querySelector(".adminProfile"),this.adminPanel(),this.clickHandler=(t="click",e=function(t){var e=document.querySelector(".updateCase"),i=t.target;do{if(i==e)return void console.log("remove");i=i.parentNode}while(i);console.log("do nothing"),n.clickHandler.unlisten(document);var o=document.querySelector(".adminProfile");o.removeChild(o.lastChild)},{listen:function(n){n.addEventListener(t,e)},unlisten:function(n){n.removeEventListener(t,e)}})}t.prototype.adminPanel=function(){document.querySelector(".adminProfile")&&this.fetchCases()},t.prototype.fetchCases=function(){var t=this;fetch("http://excelninja.se/server/fetchCase.php").then(function(t){return t.json()}).then(function(e){t.printCases(e)})},t.prototype.printCases=function(t){var e='<div class="cases"><input type="text" id="searchCases" placeholder="search case...">';t.map(function(t){console.log(t.title),e+='<div class="case">\n\t\t\t\t\t\t\t<div class="id">'+t.id+'</div>\n\t\t\t\t\t\t\t<div class="title">'+t.title+'</div>\n\t\t\t\t\t\t\t<div class="company">'+t.company+'</div>\n\t\t\t\t\t\t\t<button class="updateButton" data-id="'+t.id+'">Uppdatera</button>\n\t\t\t\t\t\t\t<button class="deleteButton" data-id="'+t.id+'">Radera</button>\n\t\t\t\t\t\t</div>'}),e+='<button class="createCase">Skapa case</button><a href="logout.php">Logout</a></div>',this.adminBody.innerHTML+=e,this.addingEventListener()},t.prototype.addingEventListener=function(){for(var t=this,e=document.getElementsByClassName("deleteButton"),n=0;n<e.length;n++)e[n].addEventListener("click",function(){1==confirm("Är du säker du vill radera?")&&t.deleteCase(this.dataset.id)});var i=document.getElementsByClassName("updateButton");for(n=0;n<i.length;n++)i[n].addEventListener("click",function(){console.log(this.dataset.id),fetch("http://excelninja.se/server/fetchCaseWithId.php",{method:"POST",mode:"cors",body:JSON.stringify({id:this.dataset.id})}).then(function(t){return t.json()}).then(function(e){console.log(e[0].title),t.printUpdateCase(e)})});document.querySelector(".createCase").addEventListener("click",function(){})},t.prototype.printUpdateCase=function(t){var e=this,n=document.createElement("form");n.className="updateCase",n.innerHTML='\t<label for="id" hidden>Id:</label>\n\t\t\t\t\t\t\t\t<input type="text" id="id" name="id" value="'+t[0].id+'" hidden/>\n\n\t\t\t\t\t\t\t\t<label for="title">Titel:</label>\n\t\t\t\t\t\t\t\t<input type="text" id="title" name="title" value="'+t[0].title+'" />\n\n\t\t\t\t\t\t\t\t<label for="company">Företag: </label>\n\t\t\t\t\t\t\t\t<input type="text" id="company" name="company" value="'+t[0].company+'" />\n\n\t\t\t\t\t\t\t\t<label for="problem">Problem: </label>\n\t\t\t\t\t\t\t\t<textarea id="problem" name="problem">'+t[0].problem+'</textarea>\n\n\t\t\t\t\t\t\t\t<label for="implementation">Utförande: </label>\n\t\t\t\t\t\t\t\t<textarea id="implementation" name="implementation">'+t[0].implementation+'</textarea>\n\n\t\t\t\t\t\t\t\t<label for="results">Resultat: </label>\n\t\t\t\t\t\t\t\t<textarea id="results" name="results">'+t[0].results+'</textarea>\n\n\t\t\t\t\t\t\t\t<label for="reference">Referens: </label>\n\t\t\t\t\t\t\t\t<textarea id="reference" name="reference">'+t[0].reference+'</textarea>\n\n\t\t\t\t\t\t\t\t<label for="priority">Prio: </label>\n\t\t\t\t\t\t\t\t<input type="text" id="priority" name="priority" value="'+t[0].priority+'" />\n\n\t\t\t\t\t\t\t\t<button>Uppdatera</button>',document.querySelector(".adminProfile").appendChild(n),document.querySelector(".updateCase").addEventListener("submit",function(t){t.preventDefault();var n={};new FormData(t.target).forEach(function(t,e){n[e]=t}),console.log(n),e.clickHandler.unlisten(document),e.updateCase(n)}),e.clickHandler.listen(document)},t.prototype.updateCase=function(t){fetch("http://excelninja.se/server/updateCase.php",{method:"POST",mode:"cors",body:JSON.stringify({id:t.id,title:t.title,company:t.company,problem:t.problem,implementation:t.implementation,results:t.results,reference:t.reference,priority:t.priority})}).then(function(t){return t.json()}).then(function(t){console.log(t)}).catch(function(t){console.log(t)});var e=document.querySelector(".adminProfile");e.removeChild(e.lastChild)},t.prototype.deleteCase=function(t){console.log("delteCase is active"+t)},new t}();